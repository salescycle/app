{"version":3,"sources":["../src/styleable.js"],"names":["styleable","getSelectorsNotInStylesheet","cssProps","stylesheet","propKeys","Object","keys","cssKeys","filter","indexOf","prop","isPropsAnOverride","length","hasDefinedStyles","stylesAreOverrides","isClass","Comp","e","message","test","Array","isArray","Error","decorateSource","DecoratedComponent","styledFn","props","css","defaultProps","propTypes","getCss","Component","displayName","object"],"mappings":";;;;;;;;;;;;kBAiCwBA,S;;AAjCxB;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,SAASC,2BAAT,CAAqCC,QAArC,EAA+CC,UAA/C,EAA2D;AACzD,MAAMC,WAAWC,OAAOC,IAAP,CAAYJ,QAAZ,CAAjB;AACA,MAAMK,UAAUF,OAAOC,IAAP,CAAYH,UAAZ,CAAhB;AACA,SAAOC,SAASI,MAAT,CAAgB;AAAA,WAAQD,QAAQE,OAAR,CAAgBC,IAAhB,MAA0B,CAAC,CAAnC;AAAA,GAAhB,CAAP;AACD;;AAED,SAASC,iBAAT,CAA2BT,QAA3B,EAAqCC,UAArC,EAAiD;AAC/C,SAAOF,4BAA4BC,QAA5B,EAAsCC,UAAtC,EAAkDS,MAAlD,IAA4D,CAAnE;AACD;;AAED,SAASC,gBAAT,CAA0BV,UAA1B,EAAsC;AACpC,SAAOA,cAAcE,OAAOC,IAAP,CAAYH,UAAZ,EAAwBS,MAAxB,GAAiC,CAAtD;AACD;;AAED,SAASE,kBAAT,CAA4BZ,QAA5B,EAAsCC,UAAtC,EAAkD;AAChD,SAAOU,iBAAiBV,UAAjB,IAA+BQ,kBAAkBT,QAAlB,EAA4BC,UAA5B,CAA/B,GAAyE,IAAhF;AACD;;AAED,SAASY,OAAT,CAAiBC,IAAjB,EAAuB;AACrB;AACA,MAAI;AACFA;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACV,WAAOA,KAAKA,EAAEC,OAAP,IAAkB,oCAAoCC,IAApC,CAAyCF,EAAEC,OAA3C,CAAzB;AACD;AACD,SAAO,KAAP;AACD;;AAEc,SAASlB,SAAT,CAAmBG,UAAnB,EAA+B;AAC5C,MAAI,CAACA,UAAL,EACEA,aAAa,EAAb;;AAEF,MAAI,QAAOA,UAAP,yCAAOA,UAAP,OAAsB,QAAtB,IAAkCiB,MAAMC,OAAN,CAAclB,UAAd,CAAtC,EACE,MAAM,IAAImB,KAAJ,CAAU,oEAAV,CAAN;;AAEF,SAAO,SAASC,cAAT,CAAwBC,kBAAxB,EAA4C;AAAA;;AACjD,QAAI,CAACT,QAAQS,kBAAR,CAAL,EAAkC;AAChC,UAAMC,WAAW,SAAXA,QAAW,CAAUC,KAAV,EAAiB;AAChC,eAAOF,gCACFE,KADE;AAELC,4BACKxB,UADL,EAEKuB,MAAMC,GAFX;AAFK,WAAP;AAOD,OARD;AASAF,eAASG,YAAT,GAAwBJ,mBAAmBI,YAA3C;AACAH,eAASI,SAAT,GAAqBL,mBAAmBK,SAAxC;AACA,aAAOJ,QAAP;AACD,KAbD,MAeE;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,iCAUW;AACP,mCACEX,mBAAmB,KAAKY,KAAL,CAAWC,GAA9B,EAAmCxB,UAAnC,CADF,EAEE,yIAFF,EAGEF,4BAA4B,KAAKyB,KAAL,CAAWC,GAAvC,EAA4CxB,UAA5C,CAHF,EAIEE,OAAOC,IAAP,CAAYH,UAAZ,CAJF;AAMA,8BAAYA,UAAZ,EAA2B,KAAKuB,KAAL,CAAWC,GAAtC;AACD;AAlBH;AAAA;AAAA,iCAmBW;AACP,iBAAO,8BAAC,kBAAD,aAAoB,KAAI,SAAxB,IAAsC,KAAKD,KAA3C,IAAkD,KAAK,KAAKI,MAAL,EAAvD,IAAP;AACD;AArBH;;AAAA;AAAA,MAA+B,gBAAMC,SAArC,UACSC,WADT,kBACoC,8BAAeR,kBAAf,CADpC,eAESI,YAFT,gBAGOJ,mBAAmBI,YAH1B;AAIID,WAAK;AAJT,eAMSE,SANT,gBAOOL,mBAAmBK,SAP1B;AAQIF,WAAK,oBAAUM;AARnB;AAuBH,GAvCD;AAwCD","file":"styleable.js","sourcesContent":["import getDisplayName from './utils/get-display-name'\nimport invariant from 'invariant'\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\nfunction getSelectorsNotInStylesheet(cssProps, stylesheet) {\n  const propKeys = Object.keys(cssProps)\n  const cssKeys = Object.keys(stylesheet)\n  return propKeys.filter(prop => cssKeys.indexOf(prop) === -1)\n}\n\nfunction isPropsAnOverride(cssProps, stylesheet) {\n  return getSelectorsNotInStylesheet(cssProps, stylesheet).length <= 0\n}\n\nfunction hasDefinedStyles(stylesheet) {\n  return stylesheet && Object.keys(stylesheet).length > 0\n}\n\nfunction stylesAreOverrides(cssProps, stylesheet) {\n  return hasDefinedStyles(stylesheet) ? isPropsAnOverride(cssProps, stylesheet) : true\n}\n\nfunction isClass(Comp) {\n  // :( try/catch flow control -- want something better\n  try {\n    Comp()\n  } catch (e) {\n    return e && e.message && /Cannot call a class as a function/.test(e.message)\n  }\n  return false\n}\n\nexport default function styleable(stylesheet) {\n  if (!stylesheet)\n    stylesheet = {}\n\n  if (typeof stylesheet !== 'object' || Array.isArray(stylesheet))\n    throw new Error('stylesheet must be an object (eg, export object from a css module)')\n\n  return function decorateSource(DecoratedComponent) {\n    if (!isClass(DecoratedComponent)) {\n      const styledFn = function (props) {\n        return DecoratedComponent({\n          ...props,\n          css: {\n            ...stylesheet,\n            ...props.css\n          }\n        });\n      }\n      styledFn.defaultProps = DecoratedComponent.defaultProps\n      styledFn.propTypes = DecoratedComponent.propTypes\n      return styledFn\n    }\n    else\n      return class Styleable extends React.Component {\n        static displayName = `Styleable(${getDisplayName(DecoratedComponent)})`;\n        static defaultProps = {\n          ...DecoratedComponent.defaultProps,\n          css: {}\n        };\n        static propTypes = {\n          ...DecoratedComponent.propTypes,\n          css: PropTypes.object\n        };\n        getCss() {\n          invariant(\n            stylesAreOverrides(this.props.css, stylesheet),\n            'Expected \"this.props.css\" to provide only overrides to the given stylesheet.  Selectors \"%s\" not included in the stylesheet keys, \"%s\".',\n            getSelectorsNotInStylesheet(this.props.css, stylesheet),\n            Object.keys(stylesheet)\n          )\n          return { ...stylesheet, ...this.props.css }\n        }\n        render() {\n          return <DecoratedComponent ref=\"wrapped\" {...this.props} css={this.getCss()} />\n        }\n      }\n  }\n}\n"]}