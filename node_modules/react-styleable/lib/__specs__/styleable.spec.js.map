{"version":3,"sources":["../../src/__specs__/styleable.spec.js"],"names":["css","content","mkFixture","Subject","props","aDefault","Component","defaultProps","mkFixtureWithReqPropTypes","aReqProp","propTypes","string","isRequired","mkFunctionFixture","subject","mkFunctionFixtureWithReqPropTypes","describe","it","defaultStylesheet","component","renderIntoDocument","should","eql","throw","refs","not","have","property","done","origCss","overrideCss","unusedSelector","e","message","match","newHash","exist","findDOMNode","children","className","textContent"],"mappings":"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","file":"styleable.spec.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport TestUtils from 'react-dom/test-utils'\nimport PropTypes from 'prop-types'\n\nimport styleable from '../styleable'\n\nconst css = {\n  content: 'someHashFromALocalCssModule'\n}\n\nfunction mkFixture(css) {\n  @styleable(css)\n  class Subject extends React.Component {\n    static defaultProps = {\n      aDefault: 'still here'\n    };\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">Content {this.props.aDefault}</div>\n      )\n    }\n  }\n\n  return Subject\n}\n\nfunction mkFixtureWithReqPropTypes() {\n  @styleable(css)\n  class Subject extends React.Component {\n    static propTypes = {\n      aReqProp: PropTypes.string.isRequired\n    };\n    render() {\n      return (\n        <div className={this.props.css.content} ref=\"content\">Req content {this.props.aReqProp}</div>\n      )\n    }\n  }\n\n  return Subject\n}\n\nfunction mkFunctionFixture(css) {\n  function subject(props) {\n    return <div className={props.css.content}>Content {props.aDefault}</div>\n  }\n  subject.defaultProps = {\n    aDefault: 'still here'\n  }\n\n  return styleable(css)(subject)\n}\n\nfunction mkFunctionFixtureWithReqPropTypes() {\n  function subject(props) {\n    return <div className={props.css.content}>Req content {props.aReqProp}</div>\n  }\n  subject.propTypes = {\n    aReqProp: PropTypes.string.isRequired\n  }\n\n  return styleable(css)(subject)\n}\n\ndescribe('styleable', () => {\n\n  it('creates a default stylesheet if none supplied', () => {\n    const defaultStylesheet = {}\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.css.should.eql(defaultStylesheet)\n  })\n\n  describe('with invalid stylesheet', () => {\n\n    it('rejects css as strings', () => {\n      (() => {\n        const Subject = mkFixture('nonCssObj')\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n    it('rejects css as array', () => {\n      (() => {\n        const Subject = mkFixture(['css', 'stuff'])\n        TestUtils.renderIntoDocument(<Subject />)\n      }).should.throw(/must be an object/)\n    })\n\n  })\n\n  it('wraps the component in a component', () => {\n    const Subject = mkFixture()\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.refs.should.not.have.property('content')\n    component.refs.should.have.property('wrapped')\n  })\n\n  describe('with invalid override selectors', () => {\n\n    it('rejects styles that won\\'t be used (superset override)', (done) => {\n      const origCss = { content: 'hash' }\n      const overrideCss = { unusedSelector: 'anotherHash' }\n      const Subject = mkFixture(origCss)\n      try {\n        TestUtils.renderIntoDocument(<Subject css={overrideCss}/>)\n      } catch (e) {\n        /*\n          Using this instead of (() => {}).should.throw()\n          Because I was getting this error:\n           TypeError: Cannot call a class as a function\n             at _classCallCheck (lib/styleable.js:23:34)\n             at CssStyleComponent (lib/styleable.js:31:35)\n             at Context.<anonymous> (lib/__specs__/styleable.spec.js:64:41)\n         */\n        e.message.should.match(/provide only overrides/)\n        done()\n      }\n    })\n\n  })\n\n  it('overrides original stylesheet', () => {\n    const newHash = 'anotherHash'\n    const origCss = { content: 'hash' }\n    const overrideCss = { content: newHash }\n    const Subject = mkFixture(origCss)\n    var component = TestUtils.renderIntoDocument(<Subject css={overrideCss}/>)\n    component.props.css.content.should.eql(newHash )\n  })\n\n  it('lets defaultProps pass through', () => {\n    const Subject = mkFixture()\n    Subject.defaultProps.aDefault.should.exist\n    const component = TestUtils.renderIntoDocument(<Subject />)\n    component.props.aDefault.should.eql('still here')\n  })\n\n  it('lets propTypes pass through', () => {\n    const Subject = mkFixtureWithReqPropTypes()\n    Subject.propTypes.aReqProp.should.exist\n  })\n\n  describe('with stateless functions', () => {\n\n    it('makes the css prop available', () => {\n      const css = { content: 'cssHash' }\n      const Subject = mkFunctionFixture(css)\n      const component = TestUtils.renderIntoDocument(<div><Subject /></div>)\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(css.content)\n    })\n\n    it('allows overrides to the stylesheet', () => {\n      const newHash = 'anotherHash'\n      const origCss = { content: 'hash' }\n      const overrideCss = { content: newHash }\n      const Subject = mkFunctionFixture(origCss)\n      const component = TestUtils.renderIntoDocument(<div><Subject css={overrideCss} /></div>)\n      ReactDOM.findDOMNode(component).children[0].className.should.eql(newHash)\n    })\n\n    it('lets defaultProps pass through', () => {\n      const Subject = mkFunctionFixture()\n      Subject.defaultProps.aDefault.should.exist\n      const component = TestUtils.renderIntoDocument(<div><Subject /></div>)\n      ReactDOM.findDOMNode(component).children[0].textContent.should.eql('Content still here')\n    })\n\n    it('lets propTypes pass through', () => {\n      const Subject = mkFunctionFixtureWithReqPropTypes()\n      /*\n        Not sure how to really test the real problem where warnings aren't\n        happening when a child component has been styleable'd. This at least\n        tests the fix for the real problem.\n      */\n      Subject.propTypes.aReqProp.should.exist\n    })\n  })\n\n})\n"]}